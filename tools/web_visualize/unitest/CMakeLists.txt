set(test_srcs "")
list(APPEND test_srcs ${PROJECT_SOURCE_DIR}/tools/web_visualize/unitest/test_main.cpp)
list(APPEND test_srcs ${PROJECT_SOURCE_DIR}/tools/web_visualize/unitest/test_PyCNService.cpp)

include_directories(${PROJECT_SOURCE_DIR}/tools/web_visualize/src/pycnstream_backend)
file(GLOB_RECURSE test_pycnstream_backend_srcs ${PROJECT_SOURCE_DIR}/tools/web_visualize/src/pycnstream_backend/*.cpp)
list(APPEND test_srcs ${test_pycnstream_backend_srcs})

aux_source_directory(${PROJECT_SOURCE_DIR}/samples/demo/preprocess preprocess_srcs)
list(APPEND test_srcs ${preprocess_srcs})
aux_source_directory(${PROJECT_SOURCE_DIR}/samples/demo/postprocess postprocess_srcs)
list(APPEND test_srcs ${postprocess_srcs})

include_directories("${PROJECT_SOURCE_DIR}/samples/demo")
file(GLOB_RECURSE util_src ${PROJECT_SOURCE_DIR}/samples/demo/util.cpp)
list(APPEND test_srcs ${util_src})
# pybind11_add_module(web_test SHARED ${test_srcs})
find_package(PythonLibs REQUIRED)
include_directories(${PYTHON_INCLUDE_DIR})
#message(${PYTHON_INCLUDE_DIR})
#message(${PYTHON_LIBRARY})
add_executable(web_test ${test_srcs})
target_link_libraries(web_test gtest dl cnstream_core pycnservice ${PYTHON_LIBRARY} cnstream_va ${CN_LIBS} ${3RDPARTY_LIBS} ${OpenCV_LIBS} ${FFMPEG_LIBRARIES} pthread)
add_test(web_test ${EXECUTABLE_OUTPUT_PATH}/web_test)
